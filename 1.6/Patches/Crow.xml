<?xml version="1.0" encoding="utf-8"?>
<Patch>
  <Operation Class="PatchOperationConditional">
    <xpath>/Defs/ThingDef[defName="Crow"]</xpath>
    <success>Always</success>
    <nomatch Class="PatchOperationAdd">
      <xpath>Defs</xpath>
      <value>
        <!-- Crow -->
        <ThingDef ParentName="BB_BirdBase">
          <defName>Crow</defName>
          <label>crow</label>
          <description>A passerine in the corvid family, the crow is a highly intelligent bird that sustains itself primarily through scavenging, although it will forage on occasion. Due to their dietary habits, they have been considered ill-omens, and associated with war and the occult.</description>
          <statBases>
            <MoveSpeed>3</MoveSpeed>
            <MarketValue>100</MarketValue>
            <LeatherAmount>15</LeatherAmount>
            <ComfyTemperatureMin>-15</ComfyTemperatureMin>
            <FilthRate>2.8</FilthRate>
            <Wildness>0.4</Wildness>
          </statBases>
          <race>
            <body>Bird</body>
            <predator>false</predator>
            <baseHungerRate>0.2</baseHungerRate>
            <baseBodySize>0.4</baseBodySize>
            <baseHealthScale>0.5</baseHealthScale>
            <foodType>OmnivoreAnimal</foodType>
            <leatherDef>Leather_Bird</leatherDef>
            <trainability>Advanced</trainability>
            <wildBiomes>
              <TemperateForest>0.6</TemperateForest>
              <BorealForest>0.4</BorealForest>
            </wildBiomes>
            <mateMtbHours>8</mateMtbHours>
            <useMeatFrom>Chicken</useMeatFrom>
            <lifeExpectancy>15</lifeExpectancy>
            <lifeStageAges>
              <li>
                <def>AnimalBabyTiny</def>
                <minAge>0</minAge>
                <soundWounded>Pawn_Chick_Call</soundWounded>
                <soundDeath>Pawn_Chick_Call</soundDeath>
                <soundCall>Pawn_Chick_Call</soundCall>
                <soundAngry>Pawn_Chick_Call</soundAngry>
              </li>
              <li>
                <def>AnimalJuvenile</def>
                <minAge>0.12</minAge>
              </li>
              <li>
                <def>AnimalAdult</def>
                <minAge>0.2</minAge>
                <soundWounded>Pawn_Bird_Crow_Call</soundWounded>
                <soundDeath>Pawn_Bird_Crow_Call</soundDeath>
                <soundCall>Pawn_Bird_Crow_Call</soundCall>
                <soundAngry>Pawn_Bird_Crow_Call</soundAngry>
              </li>
            </lifeStageAges>
            <soundMeleeHitPawn>Pawn_Melee_SmallScratch_HitPawn</soundMeleeHitPawn>
            <soundMeleeHitBuilding>Pawn_Melee_SmallScratch_HitBuilding</soundMeleeHitBuilding>
            <soundMeleeMiss>Pawn_Melee_SmallScratch_Miss</soundMeleeMiss>
          </race>
          <tradeTags>
            <li>AnimalCommon</li>
          </tradeTags>
          <tools>
            <li>
              <label>talons</label>
              <capacities>
                <li>Scratch</li>
              </capacities>
              <power>5</power>
              <cooldownTime>1.5</cooldownTime>
              <linkedBodyPartsGroup>Feet</linkedBodyPartsGroup>
            </li>
            <li>
              <label>beak</label>
              <capacities>
                <li>Bite</li>
              </capacities>
              <power>3</power>
              <cooldownTime>2</cooldownTime>
              <linkedBodyPartsGroup>Beak</linkedBodyPartsGroup>
            </li>
            <li>
              <label>head</label>
              <capacities>
                <li>Blunt</li>
              </capacities>
              <power>1</power>
              <cooldownTime>20</cooldownTime>
              <linkedBodyPartsGroup>HeadAttackTool</linkedBodyPartsGroup>
              <ensureLinkedBodyPartsGroupAlwaysUsable>true</ensureLinkedBodyPartsGroupAlwaysUsable>
              <chanceFactor>0.8</chanceFactor>
              <surpriseAttack>
                <extraMeleeDamages>
                  <li>
                    <def>Stun</def>
                    <amount>14</amount>
                  </li>
                </extraMeleeDamages>
              </surpriseAttack>
            </li>
          </tools>
          <comps>
            <li Class="CompProperties_EggLayer">
              <eggUnfertilizedDef>EggCrowUnfertilized</eggUnfertilizedDef>
              <eggFertilizedDef>EggCrowFertilized</eggFertilizedDef>
              <eggFertilizationCountMax>1</eggFertilizationCountMax>
              <eggLayIntervalDays>15</eggLayIntervalDays>
              <eggCountRange>3</eggCountRange>
            </li>
          </comps>
        </ThingDef>
        <PawnKindDef ParentName="AnimalKindBase">
          <defName>Crow</defName>
          <label>crow</label>
          <race>Crow</race>
          <combatPower>20</combatPower>
          <ecoSystemWeight>0.10</ecoSystemWeight>
          <lifeStages>
            <li>
              <label>chick</label>
              <bodyGraphicData>
                <texPath>Things/Pawn/Animal/Crow/BB_Crow</texPath>
                <drawSize>1.1</drawSize>
              </bodyGraphicData>
              <dessicatedBodyGraphicData>
                <texPath>Things/Pawn/Animal/Dessicated_Kestrel</texPath>
                <drawSize>1.1</drawSize>
              </dessicatedBodyGraphicData>
            </li>
            <li>
              <bodyGraphicData>
                <texPath>Things/Pawn/Animal/Crow/BB_Crow</texPath>
                <drawSize>1.5</drawSize>
              </bodyGraphicData>
              <dessicatedBodyGraphicData>
                <texPath>Things/Pawn/Animal/Dessicated_Kestrel</texPath>
                <drawSize>1.5</drawSize>
              </dessicatedBodyGraphicData>
            </li>
            <li>
              <bodyGraphicData>
                <texPath>Things/Pawn/Animal/Crow/BB_Crow</texPath>
                <drawSize>1.9</drawSize>
                <shadowData>
                  <volume>(0.3, 0.4, 0.3)</volume>
                  <offset>(0,0,-0.05)</offset>
                </shadowData>
              </bodyGraphicData>
              <dessicatedBodyGraphicData>
                <texPath>Things/Pawn/Animal/Dessicated_Kestrel</texPath>
                <drawSize>1.9</drawSize>
              </dessicatedBodyGraphicData>
            </li>
          </lifeStages>
        </PawnKindDef>
        <!-- Crow -->
        <ThingDef ParentName="EggUnfertBase">
          <defName>EggCrowUnfertilized</defName>
          <label>crow egg (unfert.)</label>
          <description>An unfertilized crow egg. It can be eaten raw, but it's much, much better cooked.</description>
          <graphicData>
            <color>(245,245,245)</color>
          </graphicData>
          <statBases>
            <MarketValue>10</MarketValue>
          </statBases>
        </ThingDef>
        <ThingDef ParentName="EggFertBase">
          <defName>EggCrowFertilized</defName>
          <label>crow egg (fert.)</label>
          <description>A fertilized crow egg. If all goes well, it should hatch into a chick. It can be eaten raw, but it's much better cooked.</description>
          <graphicData>
            <color>(134,240,243)</color>
          </graphicData>
          <statBases>
            <MarketValue>10</MarketValue>
          </statBases>
          <comps>
            <li Class="CompProperties_Hatcher">
              <hatcherDaystoHatch>3.5</hatcherDaystoHatch>
              <hatcherPawn>Crow</hatcherPawn>
            </li>
          </comps>
        </ThingDef>
      </value>
    </nomatch>
  </Operation>
</Patch>
